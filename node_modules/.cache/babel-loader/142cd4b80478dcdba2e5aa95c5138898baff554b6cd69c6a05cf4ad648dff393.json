{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\euqin\\\\OneDrive\\\\Desktop\\\\ADVENT\\\\advent-admin\\\\src\\\\pages\\\\EventFeedbacks.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\nimport Sidebar from \"../components/Sidebar\";\nimport { db } from \"../firebase/firebaseConfig\";\nimport { collection, onSnapshot, query, where, orderBy, addDoc, deleteDoc, doc } from \"firebase/firestore\";\nimport Swal from \"sweetalert2\";\n\n// ---- helpers ----\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getQueryParam = (search, key, def = \"\") => {\n  const u = new URLSearchParams(search);\n  return u.get(key) || def;\n};\n\n// Temporary heuristic (until VADER): derive sentiment from fields if not present\nconst deriveSentimentHeuristic = fb => {\n  const rating = Number(fb === null || fb === void 0 ? void 0 : fb.rating);\n  const text = ((fb === null || fb === void 0 ? void 0 : fb.comment) || \"\").toLowerCase();\n\n  // quick and dirty spam flags (tweak freely)\n  const spamWords = [\"http://\", \"https://\", \"buy now\", \"promo\", \"free $$$\", \"visit my\"];\n  const isSpam = Array.isArray(spamWords) && spamWords.some(w => text.includes(w)) || (fb === null || fb === void 0 ? void 0 : fb.isSpam) === true;\n  if (isSpam) return \"spam\";\n  if (!Number.isNaN(rating)) {\n    if (rating >= 4) return \"positive\";\n    if (rating <= 2) return \"negative\";\n  }\n  // unrated or neutral → treat as positive/negative based on your needs; we'll keep \"neutral\" inside \"all\"\n  return \"neutral\";\n};\n\n// Friendly date\nconst fmtDate = ts => {\n  try {\n    var _ts$toDate;\n    const date = (ts === null || ts === void 0 ? void 0 : (_ts$toDate = ts.toDate) === null || _ts$toDate === void 0 ? void 0 : _ts$toDate.call(ts)) instanceof Date ? ts.toDate() : new Date(ts || Date.now());\n    return date.toLocaleString();\n  } catch {\n    return \"—\";\n  }\n};\nfunction EventFeedbacks() {\n  _s();\n  var _location$state, _categorized$counts, _categorized$counts2, _categorized$counts3, _categorized$counts4, _categorized$counts5;\n  const {\n    eventId\n  } = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  // which tab? all | positive | negative | spam\n  const [activeSentiment, setActiveSentiment] = useState(getQueryParam(location.search, \"sentiment\", \"all\"));\n  const [feedbacks, setFeedbacks] = useState([]);\n  const [eventName, setEventName] = useState((location === null || location === void 0 ? void 0 : (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.eventName) || \"Event\");\n\n  // Listen for feedbacks for this event\n  useEffect(() => {\n    if (!eventId) return;\n    const qRef = query(collection(db, \"feedbacks\"), where(\"eventId\", \"==\", eventId), orderBy(\"createdAt\", \"desc\"));\n    const unsub = onSnapshot(qRef, snap => {\n      const data = snap.docs.map(d => ({\n        id: d.id,\n        ...d.data()\n      }));\n      setFeedbacks(data);\n    });\n    return () => unsub();\n  }, [eventId]);\n\n  // Sync sentiment tab to URL (so refresh keeps selection)\n  useEffect(() => {\n    const params = new URLSearchParams(location.search);\n    if (activeSentiment === \"all\") params.delete(\"sentiment\");else params.set(\"sentiment\", activeSentiment);\n    navigate({\n      search: params.toString()\n    }, {\n      replace: true\n    });\n  }, [activeSentiment]); // eslint-disable-line\n\n  // categorize using stored fb.sentiment if present, else heuristic\n  const categorized = useMemo(() => {\n    const withSent = feedbacks.map(fb => ({\n      ...fb,\n      _sentiment: (fb === null || fb === void 0 ? void 0 : fb.sentiment) || deriveSentimentHeuristic(fb)\n    }));\n    const buckets = {\n      all: withSent,\n      positive: withSent.filter(f => f._sentiment === \"positive\"),\n      negative: withSent.filter(f => f._sentiment === \"negative\"),\n      spam: withSent.filter(f => f._sentiment === \"spam\")\n    };\n    return {\n      ...buckets,\n      counts: {\n        all: withSent.length,\n        positive: buckets.positive.length,\n        negative: buckets.negative.length,\n        spam: buckets.spam.length\n      }\n    };\n  }, [feedbacks]);\n  const rows = useMemo(() => {\n    return activeSentiment === \"all\" ? categorized.all : categorized[activeSentiment] || [];\n  }, [categorized, activeSentiment]);\n  const total = ((_categorized$counts = categorized.counts) === null || _categorized$counts === void 0 ? void 0 : _categorized$counts.all) || 0;\n  const avg = useMemo(() => {\n    const ratings = feedbacks.map(f => Number(f.rating)).filter(n => !Number.isNaN(n));\n    const sum = ratings.reduce((a, b) => a + b, 0);\n    return ratings.length ? Number((sum / ratings.length).toFixed(2)) : 0;\n  }, [feedbacks]);\n\n  // actions\n  const handleArchive = async (id, fb) => {\n    const confirm = await Swal.fire({\n      title: \"Archive this feedback?\",\n      text: \"It will be moved to Archived Feedbacks.\",\n      icon: \"question\",\n      showCancelButton: true,\n      confirmButtonColor: \"#1abc9c\",\n      cancelButtonColor: \"#3085d6\",\n      confirmButtonText: \"Yes, archive it\"\n    });\n    if (!confirm.isConfirmed) return;\n    try {\n      await addDoc(collection(db, \"archived_feedbacks\"), {\n        ...fb,\n        archivedAt: new Date()\n      });\n      await deleteDoc(doc(db, \"feedbacks\", id));\n      Swal.fire({\n        icon: \"success\",\n        title: \"Archived\",\n        timer: 1400,\n        showConfirmButton: false\n      });\n    } catch (err) {\n      console.error(err);\n      Swal.fire({\n        icon: \"error\",\n        title: \"Failed to archive\",\n        text: (err === null || err === void 0 ? void 0 : err.message) || \"\"\n      });\n    }\n  };\n  const handleDelete = async id => {\n    const confirm = await Swal.fire({\n      title: \"Delete this feedback?\",\n      text: \"This action cannot be undone.\",\n      icon: \"warning\",\n      showCancelButton: true,\n      confirmButtonColor: \"#e74c3c\",\n      cancelButtonColor: \"#3085d6\",\n      confirmButtonText: \"Yes, delete it\"\n    });\n    if (!confirm.isConfirmed) return;\n    try {\n      await deleteDoc(doc(db, \"feedbacks\", id));\n      Swal.fire({\n        icon: \"success\",\n        title: \"Deleted\",\n        timer: 1300,\n        showConfirmButton: false\n      });\n    } catch (err) {\n      console.error(err);\n      Swal.fire({\n        icon: \"error\",\n        title: \"Failed to delete\",\n        text: (err === null || err === void 0 ? void 0 : err.message) || \"\"\n      });\n    }\n  };\n\n  // sentiment pills\n  const Pill = ({\n    value,\n    label,\n    count\n  }) => {\n    const active = activeSentiment === value;\n    return /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setActiveSentiment(value),\n      className: \"px-4 py-2 rounded-full text-sm transition \" + (active ? \"bg-blue-600 text-white shadow\" : \"bg-white text-gray-700 hover:bg-gray-100 border\"),\n      children: [label, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: active ? \"bg-white/20\" : \"bg-gray-200\",\n        style: {\n          borderRadius: 9999,\n          padding: \"2px 8px\",\n          marginLeft: 8\n        },\n        children: count\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex h-screen bg-gray-100 font-poppins\",\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 p-10 overflow-y-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-semibold text-gray-800\",\n          children: [\"Feedbacks \\u2014 \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-blue-600\",\n            children: eventName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500 mt-1\",\n          children: [\"Total: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold text-gray-700\",\n            children: total\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 20\n          }, this), \" • \", \"Average Rating:\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold text-gray-700\",\n            children: [avg, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-yellow-500\",\n              children: \"\\u2605\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-wrap gap-3 mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(Pill, {\n          value: \"all\",\n          label: \"All\",\n          count: ((_categorized$counts2 = categorized.counts) === null || _categorized$counts2 === void 0 ? void 0 : _categorized$counts2.all) || 0\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Pill, {\n          value: \"positive\",\n          label: \"Positive\",\n          count: ((_categorized$counts3 = categorized.counts) === null || _categorized$counts3 === void 0 ? void 0 : _categorized$counts3.positive) || 0\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Pill, {\n          value: \"negative\",\n          label: \"Negative\",\n          count: ((_categorized$counts4 = categorized.counts) === null || _categorized$counts4 === void 0 ? void 0 : _categorized$counts4.negative) || 0\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Pill, {\n          value: \"spam\",\n          label: \"Spam\",\n          count: ((_categorized$counts5 = categorized.counts) === null || _categorized$counts5 === void 0 ? void 0 : _categorized$counts5.spam) || 0\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white shadow-lg rounded-xl overflow-hidden\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"min-w-full text-left text-gray-700\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"bg-blue-600 text-white\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-sm font-medium\",\n                children: \"User\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-sm font-medium\",\n                children: \"Rating\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-sm font-medium\",\n                children: \"Comment\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-sm font-medium\",\n                children: \"Sentiment\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-sm font-medium\",\n                children: \"Submitted\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-sm font-medium text-center\",\n                children: \"Actions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: rows.length ? rows.map(fb => {\n              var _fb$rating;\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: \"border-b hover:bg-gray-50 transition\",\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4\",\n                  children: fb !== null && fb !== void 0 && fb.anonymous ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"italic text-gray-500\",\n                    children: \"Anonymous\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 25\n                  }, this) : (fb === null || fb === void 0 ? void 0 : fb.userName) || (fb === null || fb === void 0 ? void 0 : fb.userEmail) || \"—\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-semibold text-gray-800\",\n                    children: (_fb$rating = fb === null || fb === void 0 ? void 0 : fb.rating) !== null && _fb$rating !== void 0 ? _fb$rating : \"—\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 245,\n                    columnNumber: 23\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-yellow-500\",\n                    children: \"\\u2605\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 248,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 244,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4\",\n                  children: fb !== null && fb !== void 0 && fb.comment ? fb.comment : /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-gray-400 italic\",\n                    children: \"No comment\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 251,\n                    columnNumber: 51\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 capitalize\",\n                  children: (fb === null || fb === void 0 ? void 0 : fb.sentiment) || (fb === null || fb === void 0 ? void 0 : fb._sentiment) || \"—\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4\",\n                  children: fmtDate(fb === null || fb === void 0 ? void 0 : fb.createdAt)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 256,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex gap-2 justify-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded-md text-sm\",\n                      onClick: () => handleArchive(fb.id, fb),\n                      children: \"Archive\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 259,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-md text-sm\",\n                      onClick: () => handleDelete(fb.id),\n                      children: \"Delete\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 265,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 258,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 21\n                }, this)]\n              }, fb.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 19\n              }, this);\n            }) : /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: 6,\n                className: \"px-6 py-10 text-center text-gray-500\",\n                children: \"No feedbacks in this category.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xs text-gray-400 mt-3\",\n        children: [\"Later: store VADER results in \", /*#__PURE__*/_jsxDEV(\"code\", {\n          children: \"sentiment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 41\n        }, this), \" (\\\"positive\\\" | \\\"negative\\\" | \\\"spam\\\") so the UI filters directly from Firestore.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 193,\n    columnNumber: 5\n  }, this);\n}\n_s(EventFeedbacks, \"NUflwBEAGjpXNS6ICUPUgJrZO1c=\", false, function () {\n  return [useParams, useNavigate, useLocation];\n});\n_c = EventFeedbacks;\nexport default EventFeedbacks;\nvar _c;\n$RefreshReg$(_c, \"EventFeedbacks\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","useLocation","useNavigate","useParams","Sidebar","db","collection","onSnapshot","query","where","orderBy","addDoc","deleteDoc","doc","Swal","jsxDEV","_jsxDEV","getQueryParam","search","key","def","u","URLSearchParams","get","deriveSentimentHeuristic","fb","rating","Number","text","comment","toLowerCase","spamWords","isSpam","Array","isArray","some","w","includes","isNaN","fmtDate","ts","_ts$toDate","date","toDate","call","Date","now","toLocaleString","EventFeedbacks","_s","_location$state","_categorized$counts","_categorized$counts2","_categorized$counts3","_categorized$counts4","_categorized$counts5","eventId","navigate","location","activeSentiment","setActiveSentiment","feedbacks","setFeedbacks","eventName","setEventName","state","qRef","unsub","snap","data","docs","map","d","id","params","delete","set","toString","replace","categorized","withSent","_sentiment","sentiment","buckets","all","positive","filter","f","negative","spam","counts","length","rows","total","avg","ratings","n","sum","reduce","a","b","toFixed","handleArchive","confirm","fire","title","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","isConfirmed","archivedAt","timer","showConfirmButton","err","console","error","message","handleDelete","Pill","value","label","count","active","onClick","className","children","style","borderRadius","padding","marginLeft","fileName","_jsxFileName","lineNumber","columnNumber","_fb$rating","anonymous","userName","userEmail","createdAt","colSpan","_c","$RefreshReg$"],"sources":["C:/Users/euqin/OneDrive/Desktop/ADVENT/advent-admin/src/pages/EventFeedbacks.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\r\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\r\nimport Sidebar from \"../components/Sidebar\";\r\nimport { db } from \"../firebase/firebaseConfig\";\r\nimport {\r\n  collection,\r\n  onSnapshot,\r\n  query,\r\n  where,\r\n  orderBy,\r\n  addDoc,\r\n  deleteDoc,\r\n  doc,\r\n} from \"firebase/firestore\";\r\nimport Swal from \"sweetalert2\";\r\n\r\n// ---- helpers ----\r\nconst getQueryParam = (search, key, def = \"\") => {\r\n  const u = new URLSearchParams(search);\r\n  return u.get(key) || def;\r\n};\r\n\r\n// Temporary heuristic (until VADER): derive sentiment from fields if not present\r\nconst deriveSentimentHeuristic = (fb) => {\r\n  const rating = Number(fb?.rating);\r\n  const text = (fb?.comment || \"\").toLowerCase();\r\n\r\n  // quick and dirty spam flags (tweak freely)\r\n  const spamWords = [\"http://\", \"https://\", \"buy now\", \"promo\", \"free $$$\", \"visit my\"];\r\n  const isSpam =\r\n    (Array.isArray(spamWords) && spamWords.some((w) => text.includes(w))) ||\r\n    (fb?.isSpam === true);\r\n\r\n  if (isSpam) return \"spam\";\r\n  if (!Number.isNaN(rating)) {\r\n    if (rating >= 4) return \"positive\";\r\n    if (rating <= 2) return \"negative\";\r\n  }\r\n  // unrated or neutral → treat as positive/negative based on your needs; we'll keep \"neutral\" inside \"all\"\r\n  return \"neutral\";\r\n};\r\n\r\n// Friendly date\r\nconst fmtDate = (ts) => {\r\n  try {\r\n    const date = ts?.toDate?.() instanceof Date ? ts.toDate() : new Date(ts || Date.now());\r\n    return date.toLocaleString();\r\n  } catch {\r\n    return \"—\";\r\n  }\r\n};\r\n\r\nfunction EventFeedbacks() {\r\n  const { eventId } = useParams();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  // which tab? all | positive | negative | spam\r\n  const [activeSentiment, setActiveSentiment] = useState(\r\n    getQueryParam(location.search, \"sentiment\", \"all\")\r\n  );\r\n  const [feedbacks, setFeedbacks] = useState([]);\r\n  const [eventName, setEventName] = useState(location?.state?.eventName || \"Event\");\r\n\r\n  // Listen for feedbacks for this event\r\n  useEffect(() => {\r\n    if (!eventId) return;\r\n    const qRef = query(\r\n      collection(db, \"feedbacks\"),\r\n      where(\"eventId\", \"==\", eventId),\r\n      orderBy(\"createdAt\", \"desc\")\r\n    );\r\n    const unsub = onSnapshot(qRef, (snap) => {\r\n      const data = snap.docs.map((d) => ({ id: d.id, ...d.data() }));\r\n      setFeedbacks(data);\r\n    });\r\n    return () => unsub();\r\n  }, [eventId]);\r\n\r\n  // Sync sentiment tab to URL (so refresh keeps selection)\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(location.search);\r\n    if (activeSentiment === \"all\") params.delete(\"sentiment\");\r\n    else params.set(\"sentiment\", activeSentiment);\r\n    navigate({ search: params.toString() }, { replace: true });\r\n  }, [activeSentiment]); // eslint-disable-line\r\n\r\n  // categorize using stored fb.sentiment if present, else heuristic\r\n  const categorized = useMemo(() => {\r\n    const withSent = feedbacks.map((fb) => ({\r\n      ...fb,\r\n      _sentiment: fb?.sentiment || deriveSentimentHeuristic(fb),\r\n    }));\r\n\r\n    const buckets = {\r\n      all: withSent,\r\n      positive: withSent.filter((f) => f._sentiment === \"positive\"),\r\n      negative: withSent.filter((f) => f._sentiment === \"negative\"),\r\n      spam: withSent.filter((f) => f._sentiment === \"spam\"),\r\n    };\r\n\r\n    return {\r\n      ...buckets,\r\n      counts: {\r\n        all: withSent.length,\r\n        positive: buckets.positive.length,\r\n        negative: buckets.negative.length,\r\n        spam: buckets.spam.length,\r\n      },\r\n    };\r\n  }, [feedbacks]);\r\n\r\n  const rows = useMemo(() => {\r\n    return activeSentiment === \"all\" ? categorized.all : categorized[activeSentiment] || [];\r\n  }, [categorized, activeSentiment]);\r\n\r\n  const total = categorized.counts?.all || 0;\r\n  const avg = useMemo(() => {\r\n    const ratings = feedbacks.map((f) => Number(f.rating)).filter((n) => !Number.isNaN(n));\r\n    const sum = ratings.reduce((a, b) => a + b, 0);\r\n    return ratings.length ? Number((sum / ratings.length).toFixed(2)) : 0;\r\n  }, [feedbacks]);\r\n\r\n  // actions\r\n  const handleArchive = async (id, fb) => {\r\n    const confirm = await Swal.fire({\r\n      title: \"Archive this feedback?\",\r\n      text: \"It will be moved to Archived Feedbacks.\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#1abc9c\",\r\n      cancelButtonColor: \"#3085d6\",\r\n      confirmButtonText: \"Yes, archive it\",\r\n    });\r\n    if (!confirm.isConfirmed) return;\r\n\r\n    try {\r\n      await addDoc(collection(db, \"archived_feedbacks\"), {\r\n        ...fb,\r\n        archivedAt: new Date(),\r\n      });\r\n      await deleteDoc(doc(db, \"feedbacks\", id));\r\n      Swal.fire({ icon: \"success\", title: \"Archived\", timer: 1400, showConfirmButton: false });\r\n    } catch (err) {\r\n      console.error(err);\r\n      Swal.fire({ icon: \"error\", title: \"Failed to archive\", text: err?.message || \"\" });\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    const confirm = await Swal.fire({\r\n      title: \"Delete this feedback?\",\r\n      text: \"This action cannot be undone.\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#e74c3c\",\r\n      cancelButtonColor: \"#3085d6\",\r\n      confirmButtonText: \"Yes, delete it\",\r\n    });\r\n    if (!confirm.isConfirmed) return;\r\n\r\n    try {\r\n      await deleteDoc(doc(db, \"feedbacks\", id));\r\n      Swal.fire({ icon: \"success\", title: \"Deleted\", timer: 1300, showConfirmButton: false });\r\n    } catch (err) {\r\n      console.error(err);\r\n      Swal.fire({ icon: \"error\", title: \"Failed to delete\", text: err?.message || \"\" });\r\n    }\r\n  };\r\n\r\n  // sentiment pills\r\n  const Pill = ({ value, label, count }) => {\r\n    const active = activeSentiment === value;\r\n    return (\r\n      <button\r\n        onClick={() => setActiveSentiment(value)}\r\n        className={\r\n          \"px-4 py-2 rounded-full text-sm transition \" +\r\n          (active\r\n            ? \"bg-blue-600 text-white shadow\"\r\n            : \"bg-white text-gray-700 hover:bg-gray-100 border\")\r\n        }\r\n      >\r\n        {label}{\" \"}\r\n        <span className={active ? \"bg-white/20\" : \"bg-gray-200\"} style={{ borderRadius: 9999, padding: \"2px 8px\", marginLeft: 8 }}>\r\n          {count}\r\n        </span>\r\n      </button>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-gray-100 font-poppins\">\r\n      <Sidebar />\r\n\r\n      <div className=\"flex-1 p-10 overflow-y-auto\">\r\n        {/* Header */}\r\n        <div className=\"mb-6\">\r\n          <h1 className=\"text-3xl font-semibold text-gray-800\">\r\n            Feedbacks — <span className=\"text-blue-600\">{eventName}</span>\r\n          </h1>\r\n          <p className=\"text-gray-500 mt-1\">\r\n            Total: <span className=\"font-semibold text-gray-700\">{total}</span>\r\n            {\" • \"}\r\n            Average Rating:{\" \"}\r\n            <span className=\"font-semibold text-gray-700\">\r\n              {avg} <span className=\"text-yellow-500\">★</span>\r\n            </span>\r\n          </p>\r\n        </div>\r\n\r\n        {/* Sentiment Pills */}\r\n        <div className=\"flex flex-wrap gap-3 mb-6\">\r\n          <Pill value=\"all\" label=\"All\" count={categorized.counts?.all || 0} />\r\n          <Pill value=\"positive\" label=\"Positive\" count={categorized.counts?.positive || 0} />\r\n          <Pill value=\"negative\" label=\"Negative\" count={categorized.counts?.negative || 0} />\r\n          <Pill value=\"spam\" label=\"Spam\" count={categorized.counts?.spam || 0} />\r\n        </div>\r\n\r\n        {/* Table Card */}\r\n        <div className=\"bg-white shadow-lg rounded-xl overflow-hidden\">\r\n          <table className=\"min-w-full text-left text-gray-700\">\r\n            <thead className=\"bg-blue-600 text-white\">\r\n              <tr>\r\n                <th className=\"px-6 py-3 text-sm font-medium\">User</th>\r\n                <th className=\"px-6 py-3 text-sm font-medium\">Rating</th>\r\n                <th className=\"px-6 py-3 text-sm font-medium\">Comment</th>\r\n                <th className=\"px-6 py-3 text-sm font-medium\">Sentiment</th>\r\n                <th className=\"px-6 py-3 text-sm font-medium\">Submitted</th>\r\n                <th className=\"px-6 py-3 text-sm font-medium text-center\">Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {rows.length ? (\r\n                rows.map((fb) => (\r\n                  <tr key={fb.id} className=\"border-b hover:bg-gray-50 transition\">\r\n                    <td className=\"px-6 py-4\">\r\n                      {fb?.anonymous ? (\r\n                        <span className=\"italic text-gray-500\">Anonymous</span>\r\n                      ) : (\r\n                        fb?.userName || fb?.userEmail || \"—\"\r\n                      )}\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <span className=\"font-semibold text-gray-800\">\r\n                        {fb?.rating ?? \"—\"}\r\n                      </span>{\" \"}\r\n                      <span className=\"text-yellow-500\">★</span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      {fb?.comment ? fb.comment : <span className=\"text-gray-400 italic\">No comment</span>}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 capitalize\">\r\n                      {fb?.sentiment || fb?._sentiment || \"—\"}\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">{fmtDate(fb?.createdAt)}</td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <div className=\"flex gap-2 justify-center\">\r\n                        <button\r\n                          className=\"bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded-md text-sm\"\r\n                          onClick={() => handleArchive(fb.id, fb)}\r\n                        >\r\n                          Archive\r\n                        </button>\r\n                        <button\r\n                          className=\"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-md text-sm\"\r\n                          onClick={() => handleDelete(fb.id)}\r\n                        >\r\n                          Delete\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              ) : (\r\n                <tr>\r\n                  <td colSpan={6} className=\"px-6 py-10 text-center text-gray-500\">\r\n                    No feedbacks in this category.\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        {/* Tip */}\r\n        <p className=\"text-xs text-gray-400 mt-3\">\r\n          Later: store VADER results in <code>sentiment</code> (\"positive\" | \"negative\" | \"spam\") so the UI filters directly from Firestore.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EventFeedbacks;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}