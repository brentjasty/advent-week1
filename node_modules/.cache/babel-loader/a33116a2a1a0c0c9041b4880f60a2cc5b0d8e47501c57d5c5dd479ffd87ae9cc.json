{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\ADVENT\\\\advent-week1\\\\src\\\\pages\\\\EventFeedbacks.js\",\n  _s = $RefreshSig$();\n// src/pages/EventFeedbacks.js\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\nimport Sidebar from \"../components/Sidebar\";\nimport { db } from \"../firebase/firebaseConfig\";\nimport { collection, onSnapshot, query, where, orderBy, addDoc, deleteDoc, doc, getDocs, limit, updateDoc } from \"firebase/firestore\";\nimport vader from \"vader-sentiment\";\nimport Swal from \"sweetalert2\";\n\n// Firestore collection for event questions\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst EVENT_Q_COLLECTION = \"event_questions\";\n\n/* ----------------------- Helper Functions ----------------------- */\n\nconst average = nums => {\n  const vals = (Array.isArray(nums) ? nums : []).map(Number).filter(n => !Number.isNaN(n));\n  if (!vals.length) return 0;\n  return vals.reduce((a, b) => a + b, 0) / vals.length;\n};\n\n// Determine sentiment for new feedbacks\nconst analyzeSentiment = (text = \"\") => {\n  const spamWords = [\"http://\", \"https://\", \"buy now\", \"promo\", \"free $$$\", \"visit my\"];\n  if (spamWords.some(w => text.toLowerCase().includes(w))) return \"spam\";\n  const intensity = vader.SentimentIntensityAnalyzer.polarity_scores(text);\n  if (intensity.compound >= 0.05) return \"positive\";\n  if (intensity.compound <= -0.05) return \"negative\";\n  return \"neutral\";\n};\n\n// Convert timestamp to readable\nconst fmtDate = ts => {\n  try {\n    var _ts$toDate;\n    const d = (ts === null || ts === void 0 ? void 0 : (_ts$toDate = ts.toDate) === null || _ts$toDate === void 0 ? void 0 : _ts$toDate.call(ts)) instanceof Date ? ts.toDate() : new Date(ts);\n    return d.toLocaleString();\n  } catch {\n    return \"—\";\n  }\n};\n\n/* ----------------------- Main Page ----------------------- */\n\nexport default function EventFeedbacks() {\n  _s();\n  var _location$state, _selected$answers;\n  const {\n    eventId\n  } = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [eventName] = useState((location === null || location === void 0 ? void 0 : (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.eventName) || \"Event\");\n  const [questions, setQuestions] = useState([]);\n  const [feedbacks, setFeedbacks] = useState([]);\n  const [selected, setSelected] = useState(null);\n\n  /* ---------------- Load event questions ---------------- */\n  useEffect(() => {\n    if (!eventId) return;\n    (async () => {\n      const qRef = query(collection(db, EVENT_Q_COLLECTION), where(\"eventId\", \"==\", eventId), limit(1));\n      const snap = await getDocs(qRef);\n      if (!snap.empty) {\n        const data = snap.docs[0].data();\n        setQuestions(Array.isArray(data.questions) ? data.questions : []);\n      }\n    })();\n  }, [eventId]);\n\n  /* ---------------- Load feedbacks (MAP→ARRAY FIX) ---------------- */\n  useEffect(() => {\n    const qRef = query(collection(db, \"feedbacks\"), where(\"eventId\", \"==\", eventId), orderBy(\"createdAt\", \"desc\"));\n    const unsub = onSnapshot(qRef, async snap => {\n      const list = [];\n      for (const d of snap.docs) {\n        const raw = d.data();\n        const ratings = raw.ratings ? Object.values(raw.ratings).map(Number) : [];\n        const answers = raw.answers ? Object.values(raw.answers) : [];\n        let sentiment = raw.sentiment;\n        if (!sentiment && raw.comment) {\n          sentiment = analyzeSentiment(raw.comment);\n          await updateDoc(doc(db, \"feedbacks\", d.id), {\n            sentiment\n          });\n        }\n        list.push({\n          id: d.id,\n          ...raw,\n          ratings,\n          answers,\n          sentiment\n        });\n      }\n      setFeedbacks(list);\n    });\n    return () => unsub();\n  }, [eventId]);\n\n  /* ---------------- Archive Handler ---------------- */\n  const handleArchive = async fb => {\n    const yes = await Swal.fire({\n      title: \"Archive feedback?\",\n      text: \"This will move the feedback to the archive.\",\n      icon: \"question\",\n      showCancelButton: true,\n      confirmButtonText: \"Yes, archive\"\n    });\n    if (!yes.isConfirmed) return;\n    await addDoc(collection(db, \"archived_feedbacks\"), {\n      ...fb,\n      archivedAt: new Date()\n    });\n    await deleteDoc(doc(db, \"feedbacks\", fb.id));\n    Swal.fire(\"Archived!\", \"\", \"success\");\n  };\n\n  /* ---------------- UI ---------------- */\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex h-screen bg-gray-100 font-poppins\",\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 p-10 overflow-y-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-semibold text-gray-800\",\n          children: [\"Feedbacks \\u2014 \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-blue-600\",\n            children: eventName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate(`/admin/archived-feedbacks/${eventId}`, {\n            state: {\n              eventName\n            }\n          }),\n          className: \"px-4 py-2 rounded-full border bg-white hover:bg-gray-100 shadow text-gray-700\",\n          children: \"Archived Feedbacks\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow p-6\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"w-full table-auto\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"bg-gray-100 text-gray-700 text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"p-3 text-left\",\n                children: \"Student ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"p-3 text-left\",\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"p-3 text-left\",\n                children: \"Comment\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"p-3 text-center\",\n                children: \"Avg \\u2605\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"p-3 text-center\",\n                children: \"Sentiment\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"p-3 text-center\",\n                children: \"Action\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: feedbacks.length === 0 ? /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: 6,\n                className: \"py-6 text-center text-gray-500\",\n                children: \"No feedbacks submitted yet.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 17\n            }, this) : feedbacks.map(fb => {\n              const avg = Number(average(fb.ratings).toFixed(2));\n              const sentimentColor = fb.sentiment === \"positive\" ? \"text-green-600\" : fb.sentiment === \"negative\" ? \"text-red-600\" : fb.sentiment === \"spam\" ? \"text-yellow-600\" : \"text-gray-600\";\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: \"border-b hover:bg-gray-50 text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"p-3\",\n                  children: fb.studentID || \"—\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"p-3\",\n                  children: fb.anonymous ? \"Anonymous\" : fb.userName || \"—\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"p-3\",\n                  children: fb.comment || /*#__PURE__*/_jsxDEV(\"i\", {\n                    children: \"No comment\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 209,\n                    columnNumber: 58\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"p-3 text-center font-semibold\",\n                  children: [avg, \" \\u2605\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: `p-3 text-center font-semibold capitalize ${sentimentColor}`,\n                  children: fb.sentiment\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"p-3 text-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => setSelected(fb),\n                    className: \"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700\",\n                    children: \"View\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => handleArchive(fb),\n                    className: \"ml-2 px-3 py-1 text-sm bg-yellow-500 text-white rounded hover:bg-yellow-600\",\n                    children: \"Archive\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 227,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 23\n                }, this)]\n              }, fb.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 21\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this), selected && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white w-full max-w-2xl p-6 rounded-xl shadow-xl overflow-y-auto max-h-[90vh]\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold mb-4\",\n            children: \"Feedback Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Name:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 17\n            }, this), \" \", selected.anonymous ? \"Anonymous\" : selected.userName || \"—\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Student ID:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 17\n            }, this), \" \", selected.studentID || \"—\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Submitted:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 17\n            }, this), \" \", fmtDate(selected.createdAt)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n            className: \"my-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold mb-2\",\n            children: \"Rated Questions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"space-y-2\",\n            children: questions.map((q, idx) => {\n              var _selected$ratings$idx;\n              return /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: [idx + 1, \".\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 21\n                }, this), \" \", q, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 272,\n                  columnNumber: 21\n                }, this), \"Rating:\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-semibold\",\n                  children: (_selected$ratings$idx = selected.ratings[idx]) !== null && _selected$ratings$idx !== void 0 ? _selected$ratings$idx : 0\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 274,\n                  columnNumber: 21\n                }, this), \" \\u2605\"]\n              }, idx, true, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 15\n          }, this), ((_selected$answers = selected.answers) === null || _selected$answers === void 0 ? void 0 : _selected$answers.length) > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"hr\", {\n              className: \"my-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-semibold mb-2\",\n              children: \"Open-ended Answers\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"space-y-2\",\n              children: selected.answers.map((ans, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: [\"Answer \", idx + 1, \":\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 25\n                }, this), \" \", ans]\n              }, idx, true, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true), selected.comment && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"hr\", {\n              className: \"my-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Additional Comment:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 21\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 58\n              }, this), selected.comment]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 text-right\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setSelected(null),\n              className: \"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700\",\n              children: \"Close\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 5\n  }, this);\n}\n_s(EventFeedbacks, \"PgtmbSJYakceAeFRzmiS8fG7kw4=\", false, function () {\n  return [useParams, useNavigate, useLocation];\n});\n_c = EventFeedbacks;\nvar _c;\n$RefreshReg$(_c, \"EventFeedbacks\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","useLocation","useNavigate","useParams","Sidebar","db","collection","onSnapshot","query","where","orderBy","addDoc","deleteDoc","doc","getDocs","limit","updateDoc","vader","Swal","jsxDEV","_jsxDEV","Fragment","_Fragment","EVENT_Q_COLLECTION","average","nums","vals","Array","isArray","map","Number","filter","n","isNaN","length","reduce","a","b","analyzeSentiment","text","spamWords","some","w","toLowerCase","includes","intensity","SentimentIntensityAnalyzer","polarity_scores","compound","fmtDate","ts","_ts$toDate","d","toDate","call","Date","toLocaleString","EventFeedbacks","_s","_location$state","_selected$answers","eventId","navigate","location","eventName","state","questions","setQuestions","feedbacks","setFeedbacks","selected","setSelected","qRef","snap","empty","data","docs","unsub","list","raw","ratings","Object","values","answers","sentiment","comment","id","push","handleArchive","fb","yes","fire","title","icon","showCancelButton","confirmButtonText","isConfirmed","archivedAt","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","colSpan","avg","toFixed","sentimentColor","studentID","anonymous","userName","createdAt","q","idx","_selected$ratings$idx","ans","_c","$RefreshReg$"],"sources":["C:/Users/User/Desktop/ADVENT/advent-week1/src/pages/EventFeedbacks.js"],"sourcesContent":["// src/pages/EventFeedbacks.js\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\r\nimport Sidebar from \"../components/Sidebar\";\r\nimport { db } from \"../firebase/firebaseConfig\";\r\nimport {\r\n  collection,\r\n  onSnapshot,\r\n  query,\r\n  where,\r\n  orderBy,\r\n  addDoc,\r\n  deleteDoc,\r\n  doc,\r\n  getDocs,\r\n  limit,\r\n  updateDoc,\r\n} from \"firebase/firestore\";\r\nimport vader from \"vader-sentiment\";\r\nimport Swal from \"sweetalert2\";\r\n\r\n// Firestore collection for event questions\r\nconst EVENT_Q_COLLECTION = \"event_questions\";\r\n\r\n/* ----------------------- Helper Functions ----------------------- */\r\n\r\nconst average = (nums) => {\r\n  const vals = (Array.isArray(nums) ? nums : [])\r\n    .map(Number)\r\n    .filter((n) => !Number.isNaN(n));\r\n  if (!vals.length) return 0;\r\n  return vals.reduce((a, b) => a + b, 0) / vals.length;\r\n};\r\n\r\n// Determine sentiment for new feedbacks\r\nconst analyzeSentiment = (text = \"\") => {\r\n  const spamWords = [\"http://\", \"https://\", \"buy now\", \"promo\", \"free $$$\", \"visit my\"];\r\n  if (spamWords.some((w) => text.toLowerCase().includes(w))) return \"spam\";\r\n\r\n  const intensity = vader.SentimentIntensityAnalyzer.polarity_scores(text);\r\n  if (intensity.compound >= 0.05) return \"positive\";\r\n  if (intensity.compound <= -0.05) return \"negative\";\r\n  return \"neutral\";\r\n};\r\n\r\n// Convert timestamp to readable\r\nconst fmtDate = (ts) => {\r\n  try {\r\n    const d = ts?.toDate?.() instanceof Date ? ts.toDate() : new Date(ts);\r\n    return d.toLocaleString();\r\n  } catch {\r\n    return \"—\";\r\n  }\r\n};\r\n\r\n/* ----------------------- Main Page ----------------------- */\r\n\r\nexport default function EventFeedbacks() {\r\n  const { eventId } = useParams();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  const [eventName] = useState(location?.state?.eventName || \"Event\");\r\n  const [questions, setQuestions] = useState([]);\r\n  const [feedbacks, setFeedbacks] = useState([]);\r\n  const [selected, setSelected] = useState(null);\r\n\r\n  /* ---------------- Load event questions ---------------- */\r\n  useEffect(() => {\r\n    if (!eventId) return;\r\n    (async () => {\r\n      const qRef = query(\r\n        collection(db, EVENT_Q_COLLECTION),\r\n        where(\"eventId\", \"==\", eventId),\r\n        limit(1)\r\n      );\r\n      const snap = await getDocs(qRef);\r\n      if (!snap.empty) {\r\n        const data = snap.docs[0].data();\r\n        setQuestions(Array.isArray(data.questions) ? data.questions : []);\r\n      }\r\n    })();\r\n  }, [eventId]);\r\n\r\n  /* ---------------- Load feedbacks (MAP→ARRAY FIX) ---------------- */\r\n  useEffect(() => {\r\n    const qRef = query(\r\n      collection(db, \"feedbacks\"),\r\n      where(\"eventId\", \"==\", eventId),\r\n      orderBy(\"createdAt\", \"desc\")\r\n    );\r\n\r\n    const unsub = onSnapshot(qRef, async (snap) => {\r\n      const list = [];\r\n\r\n      for (const d of snap.docs) {\r\n        const raw = d.data();\r\n\r\n        const ratings = raw.ratings ? Object.values(raw.ratings).map(Number) : [];\r\n        const answers = raw.answers ? Object.values(raw.answers) : [];\r\n\r\n        let sentiment = raw.sentiment;\r\n        if (!sentiment && raw.comment) {\r\n          sentiment = analyzeSentiment(raw.comment);\r\n          await updateDoc(doc(db, \"feedbacks\", d.id), { sentiment });\r\n        }\r\n\r\n        list.push({\r\n          id: d.id,\r\n          ...raw,\r\n          ratings,\r\n          answers,\r\n          sentiment,\r\n        });\r\n      }\r\n\r\n      setFeedbacks(list);\r\n    });\r\n\r\n    return () => unsub();\r\n  }, [eventId]);\r\n\r\n  /* ---------------- Archive Handler ---------------- */\r\n  const handleArchive = async (fb) => {\r\n    const yes = await Swal.fire({\r\n      title: \"Archive feedback?\",\r\n      text: \"This will move the feedback to the archive.\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonText: \"Yes, archive\",\r\n    });\r\n\r\n    if (!yes.isConfirmed) return;\r\n\r\n    await addDoc(collection(db, \"archived_feedbacks\"), {\r\n      ...fb,\r\n      archivedAt: new Date(),\r\n    });\r\n\r\n    await deleteDoc(doc(db, \"feedbacks\", fb.id));\r\n\r\n    Swal.fire(\"Archived!\", \"\", \"success\");\r\n  };\r\n\r\n  /* ---------------- UI ---------------- */\r\n  return (\r\n    <div className=\"flex h-screen bg-gray-100 font-poppins\">\r\n      <Sidebar />\r\n\r\n      <div className=\"flex-1 p-10 overflow-y-auto\">\r\n\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <h1 className=\"text-3xl font-semibold text-gray-800\">\r\n            Feedbacks — <span className=\"text-blue-600\">{eventName}</span>\r\n          </h1>\r\n\r\n          <button\r\n            onClick={() =>\r\n              navigate(`/admin/archived-feedbacks/${eventId}`, { state: { eventName } })\r\n            }\r\n            className=\"px-4 py-2 rounded-full border bg-white hover:bg-gray-100 shadow text-gray-700\"\r\n          >\r\n            Archived Feedbacks\r\n          </button>\r\n        </div>\r\n\r\n        {/* TABLE */}\r\n        <div className=\"bg-white rounded-xl shadow p-6\">\r\n          <table className=\"w-full table-auto\">\r\n            <thead>\r\n              <tr className=\"bg-gray-100 text-gray-700 text-sm\">\r\n                <th className=\"p-3 text-left\">Student ID</th>\r\n                <th className=\"p-3 text-left\">Name</th>\r\n                <th className=\"p-3 text-left\">Comment</th>\r\n                <th className=\"p-3 text-center\">Avg ★</th>\r\n                <th className=\"p-3 text-center\">Sentiment</th>\r\n                <th className=\"p-3 text-center\">Action</th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              {feedbacks.length === 0 ? (\r\n                <tr>\r\n                  <td colSpan={6} className=\"py-6 text-center text-gray-500\">\r\n                    No feedbacks submitted yet.\r\n                  </td>\r\n                </tr>\r\n              ) : (\r\n                feedbacks.map((fb) => {\r\n                  const avg = Number(average(fb.ratings).toFixed(2));\r\n                  const sentimentColor =\r\n                    fb.sentiment === \"positive\"\r\n                      ? \"text-green-600\"\r\n                      : fb.sentiment === \"negative\"\r\n                      ? \"text-red-600\"\r\n                      : fb.sentiment === \"spam\"\r\n                      ? \"text-yellow-600\"\r\n                      : \"text-gray-600\";\r\n\r\n                  return (\r\n                    <tr\r\n                      key={fb.id}\r\n                      className=\"border-b hover:bg-gray-50 text-sm\"\r\n                    >\r\n                      <td className=\"p-3\">{fb.studentID || \"—\"}</td>\r\n                      <td className=\"p-3\">\r\n                        {fb.anonymous ? \"Anonymous\" : fb.userName || \"—\"}\r\n                      </td>\r\n                      <td className=\"p-3\">{fb.comment || <i>No comment</i>}</td>\r\n\r\n                      <td className=\"p-3 text-center font-semibold\">\r\n                        {avg} ★\r\n                      </td>\r\n\r\n                      <td className={`p-3 text-center font-semibold capitalize ${sentimentColor}`}>\r\n                        {fb.sentiment}\r\n                      </td>\r\n\r\n                      <td className=\"p-3 text-center\">\r\n                        <button\r\n                          onClick={() => setSelected(fb)}\r\n                          className=\"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n                        >\r\n                          View\r\n                        </button>\r\n\r\n                        <button\r\n                          onClick={() => handleArchive(fb)}\r\n                          className=\"ml-2 px-3 py-1 text-sm bg-yellow-500 text-white rounded hover:bg-yellow-600\"\r\n                        >\r\n                          Archive\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        {/* MODAL */}\r\n        {selected && (\r\n          <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50\">\r\n            <div className=\"bg-white w-full max-w-2xl p-6 rounded-xl shadow-xl overflow-y-auto max-h-[90vh]\">\r\n\r\n              <h2 className=\"text-xl font-semibold mb-4\">\r\n                Feedback Details\r\n              </h2>\r\n\r\n              <p className=\"mb-2\">\r\n                <strong>Name:</strong>{\" \"}\r\n                {selected.anonymous ? \"Anonymous\" : selected.userName || \"—\"}\r\n              </p>\r\n\r\n              <p className=\"mb-2\">\r\n                <strong>Student ID:</strong> {selected.studentID || \"—\"}\r\n              </p>\r\n\r\n              <p className=\"mb-2\">\r\n                <strong>Submitted:</strong> {fmtDate(selected.createdAt)}\r\n              </p>\r\n\r\n              <hr className=\"my-4\" />\r\n\r\n              <h3 className=\"font-semibold mb-2\">Rated Questions</h3>\r\n\r\n              <ul className=\"space-y-2\">\r\n                {questions.map((q, idx) => (\r\n                  <li key={idx} className=\"text-sm\">\r\n                    <strong>{idx + 1}.</strong> {q}\r\n                    <br />\r\n                    Rating:{\" \"}\r\n                    <span className=\"font-semibold\">{selected.ratings[idx] ?? 0}</span> ★\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n\r\n              {selected.answers?.length > 0 && (\r\n                <>\r\n                  <hr className=\"my-4\" />\r\n                  <h3 className=\"font-semibold mb-2\">Open-ended Answers</h3>\r\n                  <ul className=\"space-y-2\">\r\n                    {selected.answers.map((ans, idx) => (\r\n                      <li key={idx} className=\"text-sm\">\r\n                        <strong>Answer {idx + 1}:</strong> {ans}\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                </>\r\n              )}\r\n\r\n              {selected.comment && (\r\n                <>\r\n                  <hr className=\"my-4\" />\r\n                  <p>\r\n                    <strong>Additional Comment:</strong> <br />\r\n                    {selected.comment}\r\n                  </p>\r\n                </>\r\n              )}\r\n\r\n              <div className=\"mt-6 text-right\">\r\n                <button\r\n                  onClick={() => setSelected(null)}\r\n                  className=\"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700\"\r\n                >\r\n                  Close\r\n                </button>\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}